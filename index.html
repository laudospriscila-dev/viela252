<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Registro Fotográfico – Viela 252-A</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f4f4f4;margin:0;color:#222}
    header{background:#0b3c5d;color:#fff;padding:20px;text-align:center}
    header h1{margin:0;font-size:22px}
    header p{margin:6px 0 0;font-size:14px;opacity:.9}
    .container{max-width:1100px;margin:30px auto;padding:0 15px}
    .notice{background:#fff;border-left:6px solid #0b3c5d;padding:15px;margin-bottom:20px;font-size:14px;line-height:1.5}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px}
    .card{background:#fff;border:1px solid #ddd;box-shadow:0 2px 4px rgba(0,0,0,.08)}
    .card img{width:100%;height:180px;object-fit:cover;display:block;background:#111}
    .info{padding:10px;font-size:13px}
    .info strong{display:block;margin-bottom:4px}
    .err{margin-top:6px;color:#b00020;font-size:12px;display:none}
    footer{text-align:center;padding:25px;font-size:12px;color:#555}
    a{color:#0b3c5d}
  </style>
</head>

<body>
<header>
  <h1>Registro Fotográfico do Imóvel</h1>
  <p>Viela 252-A – Setor Leste Universitário – Goiânia/GO</p>
</header>

<div class="container">
  <div class="notice">
    <strong>Nota Técnica:</strong><br>
    As imagens foram disponibilizadas externamente para manter leve o PDF do laudo.
    Caso alguma imagem não carregue, o sistema tentará automaticamente a versão .png.
  </div>

  <div class="grid" id="gallery"></div>
</div>

<footer>
  Conteúdo hospedado em repositório público (GitHub Pages) para fins técnicos e documentais.
</footer>

<script>
  const gallery = document.getElementById("gallery");
  const CACHE_BUST = "?v=" + Date.now(); // evita cache antigo

  function makeCard(n){
    const nn = String(n).padStart(2,"0");
    const jpg = `photos/${nn}.jpg${CACHE_BUST}`;
    const png = `photos/${nn}.png${CACHE_BUST}`;

    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <a id="link-${nn}" href="${jpg}" target="_blank" rel="noopener">
        <img id="img-${nn}" src="${jpg}" alt="Imagem ${nn}">
      </a>
      <div class="info">
        <strong>Imagem ${nn}</strong>
        Viela 252-A — Registro fotográfico do imóvel
        <div class="err" id="err-${nn}">
          Não foi possível carregar .jpg nem .png. Verifique se o arquivo existe e se o formato é válido.
        </div>
      </div>
    `;

    const img = card.querySelector(`#img-${nn}`);
    const link = card.querySelector(`#link-${nn}`);
    const err = card.querySelector(`#err-${nn}`);

    // Se falhar JPG, tenta PNG automaticamente
    img.onerror = () => {
      if (img.dataset.triedPng) {
        err.style.display = "block";
        return;
      }
      img.dataset.triedPng = "1";
      img.src = png;
      link.href = png;
    };

    return card;
  }

  for(let i=1;i<=20;i++){
    gallery.appendChild(makeCard(i));
  }
</script>
</body>
</html>
